# 多样玩法金币管理系统 (DZGM)

一个功能完整、架构清晰的金币管理系统插件，为AstrBot提供多样化的娱乐玩法。

## 🌟 主要功能

### 1. 金币管理系统
- **用户账户**: 自动创建和管理用户金币账户
- **收支记录**: 完整的金币收入和支出记录
- **等级系统**: 基于经验值的用户等级系统
- **称号系统**: 丰富的用户称号，展示用户成就

### 2. 签到系统
- **每日签到**: 每日签到获得随机金币奖励 (50-200)
- **连续签到**: 连续签到天数奖励，最高可达365天
- **里程碑奖励**: 特定连续天数的额外金币奖励
- **签到统计**: 详细的签到历史和统计信息

### 3. 成就系统
- **多类别成就**: 金币、签到、等级、游戏等不同类别
- **进度跟踪**: 实时追踪成就完成进度
- **奖励机制**: 成就完成后自动给予金币和称号奖励
- **通知系统**: 新获得成就的及时通知

### 4. 游戏系统
#### 俄罗斯轮盘
- **生存游戏**: 6个位置中1个致命，5个安全
- **倍数奖励**: 生存获得5倍下注金额
- **冷却机制**: 10分钟游戏冷却时间
- **统计追踪**: 详细的游戏统计和胜率记录

### 5. 排行榜系统
- **金币排行**: 基于金币数量的全服排行榜
- **实时排名**: 显示用户当前排名位置
- **多页查看**: 支持查看不同页数的排行榜

## 🚀 使用指南

### 基础命令
```
/金币           # 查看个人金币信息
/签到           # 每日签到获得奖励
/排行榜 [数量]   # 查看金币排行榜
/成就           # 查看成就进度
/金币帮助       # 显示帮助信息
```

### 游戏命令
```
/轮盘 <金额>    # 俄罗斯轮盘游戏
/轮盘统计       # 查看游戏统计
```

### 功能展示
- **用户信息**: 显示金币、等级、称号、排名等完整信息
- **签到奖励**: 基础奖励 + 连续签到奖励
- **成就进度**: 分类别显示成就完成情况
- **游戏体验**: 刺激的俄罗斯轮盘，高风险高回报

## 🏗️ 技术架构

### 分层架构设计
```
├── core/                   # 核心业务逻辑
│   ├── domain/            # 领域模型
│   ├── repositories/      # 数据访问层
│   ├── services/         # 业务服务层
│   └── database/         # 数据库管理
├── games/                # 游戏模块
└── main.py              # 插件入口
```

### 设计特点
- **领域驱动设计**: 清晰的业务模型和职责分离
- **依赖注入**: 松耦合的组件设计
- **可扩展性**: 便于添加新的游戏和功能
- **数据持久化**: SQLite数据库确保数据安全

### 数据库结构
- **users**: 用户基础信息和金币数据
- **achievements**: 成就定义和配置
- **user_achievements**: 用户成就获得记录
- **check_in_records**: 签到历史记录
- **game_records**: 游戏记录和统计

## 🎮 游戏规则

### 俄罗斯轮盘
- 转轮有6个位置，其中1个位置有子弹
- 生存概率: 5/6 (83.3%)
- 获胜倍数: x5
- 下注范围: 10 - 10,000 金币
- 冷却时间: 10 分钟

## 🏆 成就系统

### 金币类成就
- 小富即安: 拥有100金币
- 财源广进: 拥有1000金币
- 财富自由: 拥有10000金币
- 百万富翁: 拥有100万金币

### 签到类成就
- 每日一签: 连续签到7天
- 守约之人: 连续签到30天
- 坚持不懈: 连续签到100天
- 签到达人: 连续签到365天

### 等级类成就
- 初出茅庐: 达到5级
- 小有成就: 达到10级
- 经验丰富: 达到20级
- 资深玩家: 达到50级

## 🔧 配置说明

系统采用代码配置，主要配置项：
- 初始金币: 1000
- 签到奖励范围: 50-200
- 连续签到奖励: 7天500, 30天1500等
- 游戏冷却时间: 10分钟
- 轮盘获胜倍数: 5倍

## 📝 开发说明

### 扩展新游戏
1. 在`games/`目录下创建新游戏类
2. 实现游戏逻辑和统计记录
3. 在主插件中注册新命令
4. 添加相关成就定义

### 扩展新成就
1. 在`AchievementService._get_default_achievements()`中添加
2. 在检查逻辑中添加触发条件
3. 配置奖励金币和称号

### 数据库迁移
- 新的数据库结构变更放在`core/database/migrations/`目录
- 按编号顺序命名SQL文件
- 系统会自动应用未执行的迁移

## 📊 系统特性

- ✅ 数据持久化存储
- ✅ 事务安全保证
- ✅ 错误处理机制
- ✅ 日志记录追踪
- ✅ 性能优化设计
- ✅ 模块化架构
- ✅ 易于扩展维护

## 🔮 未来规划

- [ ] 更多游戏类型 (骰子、猜数字等)
- [ ] 商店系统 (道具购买)
- [ ] 转账功能 (用户间金币转移)
- [ ] 活动系统 (限时奖励活动)
- [ ] 公会系统 (团队合作玩法)
- [ ] 投资系统 (金币增值玩法)

---

**作者**: kidWild  
**版本**: v1.0.0  
**许可**: MIT License

# 支持

[帮助文档](https://astrbot.app)
